{"version":3,"sources":["listview/index.js"],"names":["merge","Aotoo","Fox","require","TmpApp","props","_dealWithData","bind","listMethod","lmd","that","ReactDom","findDOMNode","store","data","stateData","ItemView","itemView","activatedItem","activated","listClass","undefined","onscrollend","items","forEach","item","ii","idf","key","itemMethod","listOperate","hasOwnProperty","push","length","fills","_cls","sty","listStyle","header","footer","children","ulclass","fill","React","cloneElement","className","style","PureComponent","Component","module","exports"],"mappings":";;;;;;;;;;;;AAAA;;;;AAIA;AACA,IAAMA,QAAQC,MAAMD,KAApB;AACA,IAAME,MAAMC,QAAQ,mBAAR,CAAZ;;IAEMC,M;;;AACL,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA,8GACXA,KADW;;AAEjB,QAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,OAArB;AACA,QAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBD,IAAhB,OAAlB;AAHiB;AAIjB;;;;sCAEkB;AAClB,QAAKC,UAAL,CAAgB,KAAKH,KAAL,CAAWG,UAA3B;AACA;;;6BAEUC,G,EAAI;AACd,OAAIA,OAAO,OAAOA,GAAP,IAAc,UAAzB,EAAqC;AACpC,QAAIC,OAAOC,SAASC,WAAT,CAAqB,IAArB,CAAX;AACAH,QAAIC,IAAJ,EAAU,KAAKL,KAAL,CAAWQ,KAArB;AACA;AACD;;;gCAEaC,I,EAAK;AAClB,OAAIT,QAAQL,MAAM,EAAN,EAAU,KAAKK,KAAf,CAAZ;AACA,OAAMU,YAAYV,MAAMS,IAAN,IAAY,EAA9B;AACA,OAAME,WAAWX,MAAMY,QAAvB;;AAEA,OAAMC,gBAAgBb,MAAMc,SAA5B;;AAEA;AACAd,SAAMe,SAAN,GAAkBC,SAAlB;AACAhB,SAAMG,UAAN,GAAmBa,SAAnB;AACAhB,SAAMiB,WAAN,GAAoBD,SAApB;AACA,UAAOhB,MAAMS,IAAb;AACA,UAAOT,MAAMY,QAAb;;AAEA,OAAMM,QAAQ,EAAd;AACAR,aAAUS,OAAV,CACC,UAACC,IAAD,EAAOC,EAAP,EAAc;AACbrB,UAAMsB,GAAN,GAAYD,EAAZ;AACArB,UAAMuB,GAAN,GAAYH,KAAKG,GAAL,IAAY,QAAQF,EAAhC;AACArB,UAAMS,IAAN,GAAaW,IAAb;AACApB,UAAMc,SAAN,GAAkB,KAAlB;AACA,QAAIM,QAAQA,KAAKI,UAAjB,EAA6B;AAC5BxB,WAAMwB,UAAN,GAAmBJ,KAAKI,UAAxB;AACA,YAAOJ,KAAKI,UAAZ;AACA;AACD,QAAMC,cAAc,EAApB,CATa,CASU;;AAEvB,QAAI,OAAOZ,aAAP,IAAwB,QAAxB,IAAoCA,iBAAiBQ,EAAzD,EAA6D;AAC5DrB,WAAMc,SAAN,GAAkB,IAAlB;AACA;;AAED,QAAI,QAAOM,IAAP,yCAAOA,IAAP,MAAe,QAAf,IAA2BA,KAAKM,cAAL,CAAoB,WAApB,CAA/B,EAAiE;AAChE1B,WAAMc,SAAN,GAAkBM,KAAKN,SAAvB;AACA;;AAED;AACA,QAAIH,YAAY,OAAOA,QAAP,IAAmB,UAAnC,EAA+C;AAC9CS,UAAKO,IAAL,CAAUhB,SAASX,KAAT,EAAgBH,GAAhB,CAAV;AACA,KAFD,MAEO;AACNqB,WAAMS,IAAN,CAAW,oBAAC,GAAD,EAAS3B,KAAT,CAAX;AACA;AACD,IA1BF;AA4BA,UAAOkB,MAAMU,MAAN,GAAe;AAAA;AAAA,MAAI,WAAU,OAAd;AAAA;AAAwBV,SAAxB;AAAA;AAAA,IAAf,GAAsD,EAA7D;AACA;;;2BAEO;AACP,OAAIW,QAAQ,KAAK5B,aAAL,EAAZ;AACA,OAAI6B,OAAO,WAAX;AACA,OAAIC,YAAJ;AACA,OAAG,KAAK/B,KAAL,CAAWe,SAAd,EAAwB;AACvBe,WAAO,eAAe,KAAK9B,KAAL,CAAWe,SAA1B,IAAqC,EAA5C;AACA;AACD,OAAG,KAAKf,KAAL,CAAWgC,SAAd,EAAwB;AACvBD,UAAM,KAAK/B,KAAL,CAAWgC,SAAjB;AACA;AACD,OAAI,KAAKhC,KAAL,CAAWiC,MAAX,IAAqB,KAAKjC,KAAL,CAAWkC,MAAhC,IAA0C,KAAKlC,KAAL,CAAWmC,QAAzD,EAAmE;AAClE,WACC;AAAA;AAAA,OAAK,WAAWL,IAAhB,EAAsB,OAAOC,GAA7B;AACE,UAAK/B,KAAL,CAAWiC,MADb;AAEEJ,UAFF;AAGE,UAAK7B,KAAL,CAAWkC,MAHb;AAIE,UAAKlC,KAAL,CAAWmC;AAJb,KADD;AAQA,IATD,MASO;AACN,QAAMC,sBAAmB,KAAKpC,KAAL,CAAWe,SAAX,IAAsB,EAAzC,CAAN;AACA,QAAIc,KAAJ,EAAW;AACV,SAAMQ,OAAOR,KAAb;AACA,YAAOS,MAAMC,YAAN,CAAmBF,IAAnB,EAAyB,EAACG,WAAWJ,OAAZ,EAAqBK,OAAOV,GAA5B,EAAzB,CAAP;AACA,KAHD,MAGO;AACN,YAAO,4BAAI,WAAWK,OAAf,GAAP;AACA;AACD;AACD;;;;EA5FoBE,MAAMI,aAAN,IAAuBJ,MAAMK,S;;AA+FnDC,OAAOC,OAAP,GAAiB9C,MAAjB","file":"../../listview/index.js","sourcesContent":["/**\n* list 通用组件\n* 返回 div > (ul > li)*n\n*/\n// const cloneDeep = Aotoo.cloneDeep\nconst merge = Aotoo.merge\nconst Fox = require('../itemview/foxli')\n\nclass TmpApp extends (React.PureComponent || React.Component) {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis._dealWithData = this._dealWithData.bind(this)\n\t\tthis.listMethod = this.listMethod.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.listMethod(this.props.listMethod)\n\t}\n\n\tlistMethod(lmd){\n\t\tif (lmd && typeof lmd == 'function') {\n\t\t\tlet that = ReactDom.findDOMNode(this);\n\t\t\tlmd(that, this.props.store)\n\t\t}\n\t}\n\n\t_dealWithData(data){\n\t\tvar props = merge({}, this.props);\n\t\tconst stateData = props.data||[]\n\t\tconst ItemView = props.itemView\n\n\t\tconst activatedItem = props.activated\n\n\t\t//删除多余的属性\n\t\tprops.listClass = undefined\n\t\tprops.listMethod = undefined\n\t\tprops.onscrollend = undefined\n\t\tdelete props.data\n\t\tdelete props.itemView\n\t\t\n\t\tconst items = []\n\t\tstateData.forEach(\n\t\t\t(item, ii) => {\n\t\t\t\tprops.idf = ii\n\t\t\t\tprops.key = item.key || 'fox' + ii\n\t\t\t\tprops.data = item\n\t\t\t\tprops.activated = false\n\t\t\t\tif (item && item.itemMethod) {\n\t\t\t\t\tprops.itemMethod = item.itemMethod\n\t\t\t\t\tdelete item.itemMethod\n\t\t\t\t}\n\t\t\t\tconst listOperate = {} //{ // parent: this.getListDom }\n\n\t\t\t\tif (typeof activatedItem == 'number' && activatedItem == ii) {\n\t\t\t\t\tprops.activated = true\n\t\t\t\t}\n\n\t\t\t\tif (typeof item == 'object' && item.hasOwnProperty('activated')) {\n\t\t\t\t\tprops.activated = item.activated\n\t\t\t\t}\n\n\t\t\t\t// return <Fox foxref={\"child_\"+ii} operate={listOperate} idf={ii} {...props} />;\n\t\t\t\tif (ItemView && typeof ItemView == 'function') {\n\t\t\t\t\titem.push(ItemView(props, Fox))\n\t\t\t\t} else {\n\t\t\t\t\titems.push(<Fox {...props} />)\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\treturn items.length ? <ul className=\"hlist\"> {items} </ul> : ''\n\t}\n\n\trender(){\n\t\tlet fills = this._dealWithData()\n\t\tlet _cls = 'list-wrap'\n\t\tlet sty\n\t\tif(this.props.listClass){\n\t\t\t_cls = \"list-wrap \" + this.props.listClass||''\n\t\t}\n\t\tif(this.props.listStyle){\n\t\t\tsty = this.props.listStyle;\n\t\t}\n\t\tif (this.props.header || this.props.footer || this.props.children) {\n\t\t\treturn (\n\t\t\t\t<div className={_cls} style={sty}>\n\t\t\t\t\t{this.props.header}\n\t\t\t\t\t{fills}\n\t\t\t\t\t{this.props.footer}\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else {\n\t\t\tconst ulclass = `hlist ${this.props.listClass||''}`\n\t\t\tif (fills) {\n\t\t\t\tconst fill = fills\n\t\t\t\treturn React.cloneElement(fill, {className: ulclass, style: sty})\n\t\t\t} else {\n\t\t\t\treturn <ul className={ulclass}></ul>\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = TmpApp;\n"]}