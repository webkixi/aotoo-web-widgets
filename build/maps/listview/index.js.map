{"version":3,"sources":["listview/index.js"],"names":["merge","Aotoo","Fox","require","TmpApp","props","_dealWithData","bind","listMethod","lmd","that","ReactDom","findDOMNode","store","data","stateData","ItemView","itemView","activatedItem","activated","listClass","undefined","onscrollend","items","forEach","item","ii","idf","key","disabled","listOperate","React","isValidElement","title","itemMethod","hasOwnProperty","push","length","fills","_cls","sty","listStyle","header","footer","children","ulclass","fill","cloneElement","className","style","PureComponent","Component","module","exports"],"mappings":"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","file":"../../listview/index.js","sourcesContent":["/**\n* list 通用组件\n* 返回 div > (ul > li)*n\n*/\n// const cloneDeep = Aotoo.cloneDeep\nconst merge = Aotoo.merge\nconst Fox = require('../itemview/foxli')\n\nclass TmpApp extends (React.PureComponent || React.Component) {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis._dealWithData = this._dealWithData.bind(this)\n\t\tthis.listMethod = this.listMethod.bind(this)\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.listMethod(this.props.listMethod)\n\t}\n\n\tlistMethod(lmd){\n\t\tif (lmd && typeof lmd == 'function') {\n\t\t\tlet that = ReactDom.findDOMNode(this);\n\t\t\tlmd(that, this.props.store)\n\t\t}\n\t}\n\n\t_dealWithData(data){\n\t\tvar props = merge({}, this.props);\n\t\tconst stateData = props.data||[]\n\t\tconst ItemView = props.itemView\n\n\t\tconst activatedItem = props.activated\n\n\t\t//删除多余的属性\n\t\tprops.listClass = undefined\n\t\tprops.listMethod = undefined\n\t\tprops.onscrollend = undefined\n\t\tdelete props.data\n\t\tdelete props.itemView\n\t\t\n\t\tconst items = []\n\t\tstateData.forEach(\n\t\t\t(item, ii) => {\n\t\t\t\tprops.idf = ii\n\t\t\t\tprops.key = item.key || 'fox' + ii\n\t\t\t\tprops.data = item\n\t\t\t\tprops.activated = false\n\t\t\t\tprops.disabled = false\n\t\t\t\tconst listOperate = {} //{ // parent: this.getListDom }\n\n\t\t\t\tif (typeof item == 'string' || typeof item == 'number' || React.isValidElement(item)) {\n\t\t\t\t\titem = {title: item}\n\t\t\t\t\tprops.data = item\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (item && item.itemMethod) {\n\t\t\t\t\tprops.itemMethod = item.itemMethod\n\t\t\t\t\tdelete item.itemMethod\n\t\t\t\t}\n\n\t\t\t\tif (typeof activatedItem == 'number' && activatedItem == ii) {\n\t\t\t\t\tprops.activated = true\n\t\t\t\t}\n\n\t\t\t\tif (typeof item == 'object' && item.hasOwnProperty('activated')) {\n\t\t\t\t\tprops.activated = item.activated\n\t\t\t\t}\n\n\t\t\t\tif (typeof item == 'object' && item.hasOwnProperty('disabled')) {\n\t\t\t\t\tprops.disabled = item.disabled\n\t\t\t\t}\n\n\t\t\t\tif (ItemView && typeof ItemView == 'function') {\n\t\t\t\t\titems.push(ItemView(props, Fox))\n\t\t\t\t} else {\n\t\t\t\t\titems.push(<Fox {...props} />)\n\t\t\t\t}\n\t\t\t}\n\t\t)\n\t\treturn items.length ? <ul className=\"hlist\"> {items} </ul> : ''\n\t}\n\n\trender(){\n\t\tlet fills = this._dealWithData()\n\t\tlet _cls = 'list-wrap'\n\t\tlet sty\n\t\tif(this.props.listClass){\n\t\t\t_cls = \"list-wrap \" + this.props.listClass||''\n\t\t}\n\t\tif(this.props.listStyle){\n\t\t\tsty = this.props.listStyle;\n\t\t}\n\t\tif (this.props.header || this.props.footer || this.props.children) {\n\t\t\treturn (\n\t\t\t\t<div className={_cls} style={sty}>\n\t\t\t\t\t{this.props.header}\n\t\t\t\t\t{fills}\n\t\t\t\t\t{this.props.footer}\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</div>\n\t\t\t)\n\t\t} else {\n\t\t\tconst ulclass = `hlist ${this.props.listClass||''}`\n\t\t\tif (fills) {\n\t\t\t\tconst fill = fills\n\t\t\t\treturn React.cloneElement(fill, {className: ulclass, style: sty})\n\t\t\t} else {\n\t\t\t\treturn <ul className={ulclass}></ul>\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = TmpApp;\n"]}